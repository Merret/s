<html>
<head>
<title>Console - Merret Short URL</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:image" content="/link-500.png">
<link rel="Shortcut Icon" type="image/x-icon" href="/link-500.png">
<link rel="apple-touch-icon" href="/link-500.jpg">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Shorten URL">
<script src="https://cdn.jsdelivr.net/gh/Merret/UsefulJS@0.4/js/xhr.min.js"></script>
<style>
@charset "UTF-8";

a {
	color: deepskyblue;
	text-decoration: none;
}
a:hover {
	color: skyblue;
	text-decoration: none;
}
a:visited {
	color: deepskyblue;
	text-decoration: none;
}
</style>
</head>
<body style="text-align:center; font-family: Arial, Helvetica, sans-serif;background-color:#f1f1f1;">

<div style="position: relative; top: 20%;">

<h2>GO-TO.ML URL Shortener</h2>

<input type="url" id="url" style="min-width:80%; max-width:90%; padding: 4px; border: 0; font-size: 24px; border-radius: 8px" placeholder="type URL here">

<button style="max-width:50%; font-size: 24px; border:none; color:#fff; background-color:#2196F3; padding: 4px; border-radius: 8px" onclick="v()">Shorten it!</button>
    
</div>
    
<div style="position: fixed; bottom: 0%; font-size: 22px; background-color:#f1f1f1; padding: 5px 0;">
    <span>Console | </span><a href="javascript:location.href='about'">About</a><span> | </span><a href="javascript:location.href='license'">License</a>
</div>

<script>
function shorten() {
    if (!navigator.onLine) {
        alert("No Internet Connection. :(");
        return;
    }
    var x = JSON.parse(xhr.post("https://api.myjson.com/bins", '["'+document.getElementById("url").value+'",0,"'+new Date().toUTCString()+'"]'));
    prompt("Your short URL is:", "go-to.ml/?"+x.uri.substring(28));
    document.getElementById("url").value = "";
}
function v() {
    var url = document.getElementById("url").value;
    var pattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
    if (pattern.test(url)) {
        shorten();
        return true;
    } 
        alert("This URL is not valid!\nDon't forget to add 'http://' or 'https://' behind the URL.");
        return false;
}
</script>
</body>
</html>
