<html>
<head>
<title>Merret Short URL</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:image" content="https://merret.github.io/s/link-500.png"/>
<script src="https://cdn.jsdelivr.net/gh/Merret/UsefulJS@0.4/js/xhr.min.js"></script>
</head>
<body style="text-align:center">

<h2>S-URL.TK URL Shortener</h2>

<input type="url" id="url" style="width:70%" placeholder="type URL here"></input>

<button style="max-width:30%" onclick="v()">Shorten it!</button>

<script>
function shorten() {
    var x = JSON.parse(xhr.post("https://api.myjson.com/bins", '["'+document.getElementById("url").value+'"]'));
    prompt("Your short URL is:", "s-url.tk/?"+x.uri.substring(28));
    
}
function v() {
    var url = document.getElementById("url").value;
    var pattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
    if (pattern.test(url)) {
        shorten();
        return true;
    } 
        alert("This URL is not valid!\nDon't forget to add 'http://' or 'https://' behind the URL.");
        return false;
}
</script>
</body>
</html>
